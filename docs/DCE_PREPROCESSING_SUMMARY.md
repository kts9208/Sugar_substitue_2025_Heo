# π“ DCE μ „μ²λ¦¬ μ”μ•½ λ³΄κ³ μ„

**μ‘μ„±μΌ**: 2025-11-05  
**λ©μ **: DCE μ „μ²λ¦¬ κ°λ… λ° κµ¬ν„ λ°©λ²• κ°„λ‹¨ μ”μ•½

---

## π― DCE μ „μ²λ¦¬λ€?

### **ν• λ¬Έμ¥ μ •μ**
> **DCE μ „μ²λ¦¬**λ” μ„¤λ¬Έ μ‘λ‹µ λ°μ΄ν„°(q21-q26)λ¥Ό ICLV μ„ νƒλ¨λΈμ΄ μ΄ν•΄ν•  μ μλ” ν•μ‹μΌλ΅ λ³€ν™ν•λ” κ³Όμ •μ…λ‹λ‹¤.

---

## π”„ λ³€ν™ κ³Όμ • μ‹κ°ν™”

### **ν„μ¬ λ°μ΄ν„° (Wide Format)**
```
μ‘λ‹µμ  q21  q22  q23  q24  q25  q26
  1     1    2    1    1    1    2     β† κ° μ§λ¬Έμ—μ„ 1, 2, 3 μ¤‘ μ„ νƒ
  3     1    2    2    1    2    1
  5     1    2    1    3    1    2
```

**λ¬Έμ μ **: 
- β κ°€κ²©μ΄ μ–Όλ§μΈμ§€ λ¨λ¦„
- β μ„¤νƒ• ν•¨λ‰μ΄ μ–Όλ§μΈμ§€ λ¨λ¦„
- β μ–΄λ–¤ μ†μ„± μ΅°ν•©μΈμ§€ λ¨λ¦„
- β ICLV λ¨λΈμ΄ μ΄ν•΄ λ¶κ°€λ¥

### **β¬‡οΈ DCE μ „μ²λ¦¬ β¬‡οΈ**

### **λ©ν‘ λ°μ΄ν„° (Long Format)**
```
μ‘λ‹µμ  μ„ νƒμ„ΈνΈ  λ€μ•  κ°€κ²©   μ„¤νƒ•  λΌλ²¨  μ„ νƒμ—¬λ¶€
  1      1      1   2000    0    1      1      β† μ„ νƒν•¨
  1      1      2   2500   25    0      0      β† μ„ νƒ μ•ν•¨
  1      1      3   3000   50    0      0      β† μ„ νƒ μ•ν•¨
  1      2      1   2000    0    0      0
  1      2      2   2500   25    1      1      β† μ„ νƒν•¨
  1      2      3   3000   50    0      0
  ...
```

**μ¥μ **:
- β… κ°€κ²©, μ„¤νƒ•, λΌλ²¨ μ •λ³΄ λ…ν™•
- β… κ° λ€μ•μ μ†μ„± μ΅°ν•© λ…μ‹
- β… μ„ νƒ μ—¬λ¶€ λ…ν™• (0 or 1)
- β… ICLV λ¨λΈμ΄ μ΄ν•΄ κ°€λ¥

---

## π“‹ μ „μ²λ¦¬μ— ν•„μ”ν• μ •λ³΄

### **ν„μ¬ ν™•μΈλ μ •λ³΄ β…**

| ν•­λ© | κ°’ | μ¶μ² |
|------|-----|------|
| μ„ νƒ μ„ΈνΈ μ | 6κ° | q21-q26 |
| λ€μ• μ | 3κ° | κ°’ λ²”μ„ 1-3 |
| μ‘λ‹µμ μ | 300λ… | λ°μ΄ν„° shape |

### **μ•„μ§ λ¨λ¥΄λ” μ •λ³΄ β**

| ν•­λ© | ν•„μ” μ΄μ  | ν™•μΈ λ°©λ²• |
|------|----------|----------|
| **μ†μ„± μΆ…λ¥** | κ°€κ²©? μ„¤νƒ•? λΌλ²¨? | μ„¤λ¬Έμ§€ ν™•μΈ |
| **μ†μ„± μμ¤€** | κ°€κ²© 2000/2500/3000? | μ„¤λ¬Έμ§€ ν™•μΈ |
| **λ€μ• μ΅°ν•©** | κ° λ€μ•μ μ†μ„±κ°’ | μ‹¤ν— μ„¤κ³„ λ§¤νΈλ¦­μ¤ |
| **μ„ νƒ μλ―Έ** | 1=μ„ νƒ? 2=μ„ νƒ? | μ„¤λ¬Έμ§€ ν™•μΈ |

---

## π” ν„μ¬ λ°μ΄ν„° λ¶„μ„ κ²°κ³Ό

### **κ°’ λ¶„ν¬ ν¨ν„΄**

```
q21: 1(222λ…), 2(63λ…), 3(15λ…)   β†’ λ€μ• 1μ΄ μ••λ„μ  μ„ νΈ
q22: 1(26λ…), 2(264λ…), 3(10λ…)   β†’ λ€μ• 2κ°€ μ••λ„μ  μ„ νΈ
q23: 1(168λ…), 2(117λ…), 3(15λ…)  β†’ λ€μ• 1κ³Ό 2 κ²½μ
q24: 1(260λ…), 2(12λ…), 3(28λ…)   β†’ λ€μ• 1μ΄ μ••λ„μ  μ„ νΈ
q25: 1(214λ…), 2(70λ…), 3(16λ…)   β†’ λ€μ• 1μ΄ μ••λ„μ  μ„ νΈ
q26: 1(70λ…), 2(213λ…), 3(17λ…)   β†’ λ€μ• 2κ°€ μ••λ„μ  μ„ νΈ
```

**ν•΄μ„**:
- κ° μ„ νƒ μ„ΈνΈλ§λ‹¤ **μ†μ„± μ΅°ν•©μ΄ λ‹¤λ¦„**
- μ–΄λ–¤ μ„ΈνΈλ” λ€μ• 1μ΄ λ§¤λ ¥μ , μ–΄λ–¤ μ„ΈνΈλ” λ€μ• 2κ°€ λ§¤λ ¥μ 
- λ€μ• 3μ€ λ€λ¶€λ¶„ μ„ νƒ μ•λ¨ (μ•„λ§λ„ "κµ¬λ§¤ μ•ν•¨" μµμ…?)

---

## π› οΈ κµ¬ν„ λ°©λ²•

### **λ°©λ²• 1: μ„¤λ¬Έμ§€ ν™•μΈ ν›„ μ •ν™•ν• μ „μ²λ¦¬ (κ¶μ¥) β­β­β­β­β­**

#### **Step 1: μ„¤λ¬Έμ§€μ—μ„ ν™•μΈν•  μ •λ³΄**

```
μμ‹ μ„¤λ¬Έμ§€:

Q21. λ‹¤μ μ ν’ μ¤‘ μ–΄λ κ²ƒμ„ μ„ νƒν•μ‹κ² μµλ‹κΉ?

μ ν’ A: κ°€κ²© 2,000μ›, μ„¤νƒ• ν•¨λ‰ 0%, κ±΄κ°• λΌλ²¨ μμ
μ ν’ B: κ°€κ²© 2,500μ›, μ„¤νƒ• ν•¨λ‰ 25%, κ±΄κ°• λΌλ²¨ μ—†μ
μ ν’ C: κµ¬λ§¤ν•μ§€ μ•μ

1) μ ν’ A
2) μ ν’ B  
3) μ ν’ C
```

**ν™•μΈν•  μ •λ³΄**:
- β… μ†μ„±: κ°€κ²©, μ„¤νƒ• ν•¨λ‰, κ±΄κ°• λΌλ²¨
- β… μμ¤€: κ°€κ²©(2000/2500/3000), μ„¤νƒ•(0/25/50), λΌλ²¨(μμ/μ—†μ)
- β… κ° μ„ νƒ μ„ΈνΈμ μ†μ„± μ΅°ν•©

#### **Step 2: μ„¤κ³„ λ§¤νΈλ¦­μ¤ μƒμ„±**

```python
# μ„¤λ¬Έμ§€ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μƒμ„±
design_matrix = pd.DataFrame({
    'choice_set': [1, 1, 1, 2, 2, 2, ...],
    'alternative': [1, 2, 3, 1, 2, 3, ...],
    'price': [2000, 2500, 0, 2000, 2500, 0, ...],
    'sugar': [0, 25, 0, 25, 0, 0, ...],
    'label': [1, 0, 0, 0, 1, 0, ...]
})
```

#### **Step 3: μ‘λ‹µ λ°μ΄ν„°μ™€ κ²°ν•©**

```python
# q21=1 β†’ μ„ νƒ μ„ΈνΈ 1μ—μ„ λ€μ• 1 μ„ νƒ
# q21=2 β†’ μ„ νƒ μ„ΈνΈ 1μ—μ„ λ€μ• 2 μ„ νƒ
# q21=3 β†’ μ„ νƒ μ„ΈνΈ 1μ—μ„ λ€μ• 3 μ„ νƒ

for respondent in data:
    for choice_set in [1, 2, 3, 4, 5, 6]:
        selected = respondent[f'q{20+choice_set}']
        
        for alternative in [1, 2, 3]:
            choice = 1 if alternative == selected else 0
            # μ„¤κ³„ λ§¤νΈλ¦­μ¤μ—μ„ μ†μ„±κ°’ κ°€μ Έμ¤κΈ°
            attributes = design_matrix[
                (design_matrix['choice_set'] == choice_set) &
                (design_matrix['alternative'] == alternative)
            ]
```

**μμƒ μ†μ” μ‹κ°„**: 4-6μ‹κ°„

---

### **λ°©λ²• 2: μ„¤λ¬Έμ§€ μ—†μ΄ μ—­μ¶”μ • (μ°¨μ„ μ±…) β­β­**

#### **κ°€μ • κΈ°λ° μ¶”μ •**

```python
# κ°€μ • 1: 3κ° μ†μ„± (κ°€κ²©, ν’μ§, λΌλ²¨)
# κ°€μ • 2: κ° 3μμ¤€
# κ°€μ • 3: Full factorial μ„¤κ³„

# λ¬Έμ : μ •ν™•λ„ λ‚®μ, ν•΄μ„ μ–΄λ ¤μ›€
```

**κ¶μ¥ν•μ§€ μ•μ**: β λ¶€μ •ν™•, μ‹ λΆ°λ„ λ‚®μ

---

## π“ μ „μ²λ¦¬ μ „ν›„ λΉ„κµ

### **μ „μ²λ¦¬ μ „ (ν„μ¬)**

```python
# λ°μ΄ν„° shape: (300, 6)
# κ° ν–‰ = 1λ…μ μ‘λ‹µμ
# κ° μ—΄ = 1κ° μ„ νƒ μ„ΈνΈ

data = pd.DataFrame({
    'no': [1, 3, 5],
    'q21': [1, 1, 1],
    'q22': [2, 2, 2],
    'q23': [1, 2, 1],
    'q24': [1, 1, 3],
    'q25': [1, 2, 1],
    'q26': [2, 1, 2]
})

# ICLV λ¨λΈ μ‚¬μ© λ¶κ°€λ¥ β
```

### **μ „μ²λ¦¬ ν›„ (λ©ν‘)**

```python
# λ°μ΄ν„° shape: (5400, 8)
# 300λ… Γ— 6κ° μ„ νƒ μ„ΈνΈ Γ— 3κ° λ€μ• = 5,400ν–‰

data = pd.DataFrame({
    'respondent_id': [1, 1, 1, 1, 1, 1, ...],
    'choice_set': [1, 1, 1, 2, 2, 2, ...],
    'alternative': [1, 2, 3, 1, 2, 3, ...],
    'price': [2000, 2500, 3000, 2000, 2500, 3000, ...],
    'sugar': [0, 25, 50, 25, 0, 50, ...],
    'label': [1, 0, 0, 0, 1, 0, ...],
    'choice': [1, 0, 0, 0, 1, 0, ...]
})

# ICLV λ¨λΈ μ‚¬μ© κ°€λ¥ β…
```

---

## π― λ‹¤μ λ‹¨κ³„

### **μ¦‰μ‹ μ‹¤ν–‰ κ°€λ¥**

1. β… **DCE κµ¬μ΅° λ¶„μ„ μ™„λ£**
   ```bash
   python scripts/analyze_dce_structure.py
   ```
   
   **κ²°κ³Ό**: 
   - 6κ° μ„ νƒ μ„ΈνΈ ν™•μΈ
   - κ° 3κ° λ€μ• ν™•μΈ
   - κ°’ λ¶„ν¬ νμ•…

### **μ„¤λ¬Έμ§€ ν™•μΈ ν•„μ”**

2. β³ **μ„¤λ¬Έμ§€ ν™•μΈ**
   - Q21-Q26 μ§λ¬Έ μ›λ¬Έ
   - κ° λ€μ•μ μ†μ„± μ΅°ν•©
   - μ†μ„± μμ¤€ μ •μ

3. β³ **μ„¤κ³„ λ§¤νΈλ¦­μ¤ μƒμ„±**
   ```bash
   python scripts/create_dce_design_matrix.py
   ```

4. β³ **DCE μ „μ²λ¦¬ μ‹¤ν–‰**
   ```bash
   python scripts/preprocess_dce_data.py
   ```

5. β³ **λ°μ΄ν„° ν†µν•©**
   ```bash
   python scripts/integrate_iclv_data.py
   ```

6. β³ **ICLV λ™μ‹μ¶”μ •**
   ```bash
   python scripts/run_iclv_estimation.py
   ```

---

## π“ ν•µμ‹¬ μ”μ•½

### **DCE μ „μ²λ¦¬ = λ°μ΄ν„° ν•μ‹ λ³€ν™**

| ν•­λ© | μ „μ²λ¦¬ μ „ | μ „μ²λ¦¬ ν›„ |
|------|----------|----------|
| **ν•μ‹** | Wide (300Γ—6) | Long (5400Γ—8) |
| **μ •λ³΄** | μ„ νƒ μ½”λ“λ§ (1/2/3) | μ†μ„±κ°’ λ…μ‹ |
| **μ‚¬μ©** | β ICLV λ¶κ°€λ¥ | β… ICLV κ°€λ¥ |

### **ν•„μ”ν• μ‘μ—…**

1. β… **μ™„λ£**: DCE κµ¬μ΅° λ¶„μ„
2. β³ **λ€κΈ°**: μ„¤λ¬Έμ§€ ν™•μΈ
3. β³ **μμ •**: μ„¤κ³„ λ§¤νΈλ¦­μ¤ μƒμ„±
4. β³ **μμ •**: μ „μ²λ¦¬ μ¤ν¬λ¦½νΈ μ‹¤ν–‰

### **μμƒ μ†μ” μ‹κ°„**

- μ„¤λ¬Έμ§€ ν™•μΈ: 1-2μ‹κ°„
- μ„¤κ³„ λ§¤νΈλ¦­μ¤: 2-3μ‹κ°„
- μ „μ²λ¦¬ κµ¬ν„: 3-4μ‹κ°„
- λ°μ΄ν„° ν†µν•©: 2-3μ‹κ°„
- **μ΄ 8-12μ‹κ°„ (1-2μΌ)**

---

## π“ μ°Έκ³  λ¬Έμ„

- **μƒμ„Έ κ°€μ΄λ“**: `docs/DCE_PREPROCESSING_GUIDE.md`
- **λ°μ΄ν„° λ¶„μ„**: `scripts/analyze_dce_structure.py`
- **κ°€λ¥μ„± λ³΄κ³ μ„**: `docs/ICLV_DATA_READINESS_REPORT.md`

---

**μ‘μ„±μΌ**: 2025-11-05  
**μƒνƒ**: β… λ¶„μ„ μ™„λ£, μ„¤λ¬Έμ§€ ν™•μΈ λ€κΈ°  
**λ‹¤μ λ‹¨κ³„**: μ„¤λ¬Έμ§€μ—μ„ Q21-Q26 μ†μ„± μ •λ³΄ ν™•μΈ

