# Theta 파라미터 해석 가이드

## 📋 모델 구조 확인

### 대안 구조 (Multinomial Logit)

**3개 대안**:
1. **Sugar** (일반당 음료)
2. **Sugar-Free** (무설탕 음료)
3. **Opt-Out** (구매 안 함) ← **기준 대안 (Reference Alternative)**

**코드 확인** (`scripts/test_gpu_batch_iclv.py` Line 408-409):
```python
# opt-out은 기준 대안이므로 제외
alternatives = ['sugar', 'sugar_free']  # opt-out 제외
```

---

## 🎯 Theta 파라미터의 의미

### 효용 함수 (Utility Function)

**일반당 (Sugar) 대안**:
```
V_sugar = ASC_sugar + β_health_label × health_label + β_price × price
          + θ_sugar_NK × NK + θ_sugar_PI × PI + θ_sugar_PP × PP
```

**무설탕 (Sugar-Free) 대안**:
```
V_sugar_free = ASC_sugar_free + β_health_label × health_label + β_price × price
               + θ_sugar_free_NK × NK + θ_sugar_free_PI × PI + θ_sugar_free_PP × PP
```

**Opt-Out 대안** (기준):
```
V_opt_out = 0  (기준 대안이므로 모든 파라미터 = 0)
```

### Theta의 해석

**Theta는 "기준 대안(Opt-Out) 대비" 해당 대안의 효용 변화**

예시:
- `θ_sugar_NK = -0.0197` (음수)
  - 영양지식(NK)이 1단위 증가할 때
  - **일반당 대안의 효용이 Opt-Out 대비 0.0197 감소**
  - 즉, 영양지식이 높을수록 일반당보다 Opt-Out을 선택할 확률 증가

---

## ✅ Theta 값의 재해석 (기준 대안 고려)

### 1. 일반당 (Sugar) 대안

| 잠재변수 | Theta | 해석 |
|---------|-------|------|
| NK (영양지식) | -0.0197 *** | NK ↑ → 일반당 효용 ↓ (vs Opt-Out) ✅ 타당 |
| PI (구매의도) | -0.0189 ** | PI ↑ → 일반당 효용 ↓ (vs Opt-Out) ⚠️ 확인 필요 |
| PP (가격수준) | -0.0180 *** | PP ↑ → 일반당 효용 ↓ (vs Opt-Out) ✅ 타당 |

**해석**:
- **영양지식 (NK)**: 영양지식이 높을수록 일반당을 선택하지 않음 (Opt-Out 선호) ✅
- **구매의도 (PI)**: 구매의도가 높을수록 일반당을 선택하지 않음 ⚠️
  - 만약 PI가 "건강 음료 구매의도"라면 타당함
  - 만약 PI가 "일반 음료 구매의도"라면 부호가 반대여야 함
- **가격수준 (PP)**: 가격이 비싸다고 인식할수록 일반당을 선택하지 않음 ✅

### 2. 무설탕 (Sugar-Free) 대안

| 잠재변수 | Theta | 해석 |
|---------|-------|------|
| NK (영양지식) | -0.0156 ** | NK ↑ → 무설탕 효용 ↓ (vs Opt-Out) ⚠️ 의외 |
| PI (구매의도) | -0.0154 ** | PI ↑ → 무설탕 효용 ↓ (vs Opt-Out) ⚠️ 확인 필요 |
| PP (가격수준) | -0.0159 ** | PP ↑ → 무설탕 효용 ↓ (vs Opt-Out) ✅ 타당 |

**해석**:
- **영양지식 (NK)**: 영양지식이 높을수록 무설탕도 선택하지 않음 (Opt-Out 선호) ⚠️
  - **예상과 반대**: 일반적으로 영양지식이 높으면 무설탕을 선호할 것으로 예상
  - **가능한 원인**:
    1. 영양지식이 높은 사람은 **인공 감미료에 대한 우려**가 있을 수 있음
    2. 영양지식이 높은 사람은 **음료 자체를 덜 소비**할 수 있음 (Opt-Out 선호)
    3. 잠재변수 척도가 역코딩되었을 가능성
- **구매의도 (PI)**: 구매의도가 높을수록 무설탕도 선택하지 않음 ⚠️
- **가격수준 (PP)**: 가격이 비싸다고 인식할수록 무설탕을 선택하지 않음 ✅

---

## 🔍 대안 간 비교 (Sugar vs Sugar-Free)

### Theta 차이 분석

| 잠재변수 | Sugar | Sugar-Free | 차이 (Sugar - Sugar-Free) |
|---------|-------|------------|--------------------------|
| NK | -0.0197 | -0.0156 | -0.0041 |
| PI | -0.0189 | -0.0154 | -0.0035 |
| PP | -0.0180 | -0.0159 | -0.0021 |

**해석**:
- 모든 잠재변수에서 **일반당의 효과가 더 큼** (절댓값)
- 즉, 잠재변수가 증가할 때 **일반당의 효용이 더 많이 감소**
- **상대적으로 무설탕이 덜 감소** → 무설탕이 상대적으로 유리

**예시 (영양지식)**:
- NK가 1단위 증가할 때:
  - 일반당 효용: -0.0197 감소
  - 무설탕 효용: -0.0156 감소
  - **차이**: 일반당이 0.0041 더 감소
  - **결과**: 영양지식이 높을수록 **무설탕이 일반당보다 상대적으로 유리**

---

## 📊 확률 변화 시뮬레이션

### 영양지식(NK) 증가 시 선택 확률 변화

**가정**:
- 초기 효용: V_sugar = 1.0, V_sugar_free = 1.0, V_opt_out = 0
- NK 증가: 0 → 1

**효용 변화**:
```
V_sugar: 1.0 → 1.0 - 0.0197 = 0.9803
V_sugar_free: 1.0 → 1.0 - 0.0156 = 0.9844
V_opt_out: 0 → 0
```

**확률 변화** (Multinomial Logit):
```
P_sugar = exp(0.9803) / [exp(0.9803) + exp(0.9844) + exp(0)]
        ≈ 0.333 → 0.331 (감소)

P_sugar_free = exp(0.9844) / [exp(0.9803) + exp(0.9844) + exp(0)]
             ≈ 0.334 → 0.333 (약간 감소)

P_opt_out = exp(0) / [exp(0.9803) + exp(0.9844) + exp(0)]
          ≈ 0.333 → 0.336 (증가)
```

**결론**:
- 영양지식이 증가하면 **Opt-Out 확률이 증가**
- 일반당과 무설탕 모두 감소하지만, **일반당이 더 많이 감소**
- **상대적으로 무설탕이 유리**

---

## 💡 주요 발견 사항

### 1. 모든 Theta가 음수인 이유

**기준 대안이 Opt-Out이기 때문**:
- Theta가 음수 = 잠재변수 증가 시 해당 대안의 효용이 Opt-Out 대비 감소
- 즉, 잠재변수가 증가할수록 **구매하지 않을 확률이 증가**

**해석**:
- 영양지식, 구매의도, 가격수준이 모두 증가하면
- 일반당과 무설탕 모두 선택하지 않고 **Opt-Out을 선택**

### 2. 무설탕의 영양지식 효과가 음수인 이유

**가능한 설명**:
1. **인공 감미료 우려**: 영양지식이 높은 사람은 인공 감미료의 부작용을 알고 있어 무설탕도 기피
2. **음료 소비 감소**: 영양지식이 높은 사람은 음료 자체를 덜 소비 (Opt-Out 선호)
3. **상대적 효과**: 일반당보다는 덜 감소하므로, 상대적으로는 무설탕이 유리

### 3. 일반당 vs 무설탕 비교

**일반당이 잠재변수에 더 민감**:
- 모든 잠재변수에서 일반당의 효과가 더 큼 (절댓값)
- 영양지식, 구매의도, 가격수준이 증가할 때 **일반당이 더 불리**
- **무설탕이 상대적으로 유리**

---

## 🎯 결론 및 권장사항

### ✅ Theta 값은 올바름

1. **CSV vs 로그 일치**: 완전 일치 ✅
2. **통계적 유의성**: 모두 유의함 ✅
3. **기준 대안 고려**: Opt-Out 대비 해석 ✅

### ⚠️ 추가 확인 필요

1. **구매의도(PI)의 정의**:
   - 어떤 제품에 대한 구매의도인지 확인
   - 설문 문항 검토

2. **영양지식(NK) 척도**:
   - 역코딩 여부 확인
   - 높은 값이 높은 지식을 의미하는지 확인

3. **대안 설명**:
   - 실험 참가자에게 대안이 어떻게 제시되었는지 확인
   - Opt-Out의 의미 (구매 안 함 vs 다른 제품 선택)

### 📋 후속 분석

1. **주효과 모델 비교**:
   - Lambda 모델 (대안 공통 효과) 추정
   - Theta 모델 (대안별 효과)과 비교

2. **탄력성 분석**:
   - 잠재변수 변화에 따른 선택 확률 변화 계산
   - 한계효과 (Marginal Effect) 계산

3. **세분화 분석**:
   - 영양지식 수준별 선택 패턴 분석
   - 고지식 vs 저지식 그룹 비교


