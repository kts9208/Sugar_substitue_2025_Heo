# λ‹¤μ¤‘ μ μ¬λ³€μ ICLV κµ¬ν„ μ™„λ£ λ³΄κ³ μ„

**λ‚ μ§**: 2025-11-09  
**μ‘μ—…**: 5κ° μ μ¬λ³€μ μ™„μ „ λ™μ‹μ¶”μ • κµ¬ν„

---

## β… κµ¬ν„ μ™„λ£

### **λ©ν‘**

4κ° μ™Έμƒ μ μ¬λ³€μ β†’ 1κ° λ‚΄μƒ μ μ¬λ³€μ (κµ¬λ§¤μλ„) β†’ μ„ νƒλ¨λΈ κµ¬μ΅°λ¥Ό μ™„μ „ λ™μ‹μ¶”μ •μΌλ΅ κµ¬ν„

### **κµ¬μ΅°**

```
[μΈ΅μ •λ¨λΈ] - 5κ° μ μ¬λ³€μ
β”β”€ κ±΄κ°•κ΄€μ‹¬λ„ (Q6-Q11, 6κ° λ¬Έν•­)
β”β”€ κ±΄κ°•μ μµμ„± (Q12-Q17, 6κ° λ¬Έν•­)
β”β”€ κ°€κ²©μμ¤€ (Q27-Q29, 3κ° λ¬Έν•­)
β”β”€ μμ–‘μ§€μ‹ (Q30-Q49, 20κ° λ¬Έν•­)
β””β”€ κµ¬λ§¤μλ„ (Q18-Q20, 3κ° λ¬Έν•­)

[κµ¬μ΅°λ¨λΈ]
μ™Έμƒ LV: κ±΄κ°•κ΄€μ‹¬λ„, κ±΄κ°•μ μµμ„±, κ°€κ²©μμ¤€, μμ–‘μ§€μ‹ ~ N(0, 1)
λ‚΄μƒ LV: κµ¬λ§¤μλ„ = Ξ³1*κ±΄κ°•κ΄€μ‹¬λ„ + Ξ³2*κ±΄κ°•μ μµμ„± + Ξ³3*κ°€κ²©μμ¤€ + Ξ³4*μμ–‘μ§€μ‹
                    + Ξ³5*age + Ξ³6*gender + Ξ³7*income + Ξ³8*education + Ξ·

[μ„ νƒλ¨λΈ]
V = Ξ²0 + Ξ²1*sugar_free + Ξ²2*health_label + Ξ²3*price + Ξ»*κµ¬λ§¤μλ„
P(μ„ νƒ) = Ξ¦(V)
```

---

## π“ μƒμ„±λ νμΌ

### **1. μ„¤μ • ν΄λμ¤**
- **νμΌ**: `src/analysis/hybrid_choice_model/iclv_models/multi_latent_config.py`
- **ν΄λμ¤**:
  - `MultiLatentStructuralConfig`: λ‹¤μ¤‘ LV κµ¬μ΅°λ¨λΈ μ„¤μ •
  - `MultiLatentConfig`: μ „μ²΄ λ¨λΈ μ„¤μ •
  - `create_default_multi_lv_config()`: μ„¤νƒ• λ€μ²΄μ¬ μ—°κµ¬μ© κΈ°λ³Έ μ„¤μ • μƒμ„±

### **2. μΈ΅μ •λ¨λΈ μ»¨ν…μ΄λ„**
- **νμΌ**: `src/analysis/hybrid_choice_model/iclv_models/multi_latent_measurement.py`
- **ν΄λμ¤**: `MultiLatentMeasurement`
- **κΈ°λ¥**:
  - κΈ°μ΅΄ `OrderedProbitMeasurement`λ¥Ό 5κ° μƒμ„±ν•μ—¬ κ΄€λ¦¬
  - 5κ° μ μ¬λ³€μμ μΈ΅μ •λ¨λΈ λ΅κ·Έμ°λ„ κ³„μ‚°
  - νλΌλ―Έν„° μ΄κΈ°ν™” λ° κ²€μ¦

### **3. κµ¬μ΅°λ¨λΈ**
- **νμΌ**: `src/analysis/hybrid_choice_model/iclv_models/multi_latent_structural.py`
- **ν΄λμ¤**: `MultiLatentStructural`
- **κΈ°λ¥**:
  - 4κ° μ™Έμƒ LV + 1κ° λ‚΄μƒ LV κµ¬μ΅°
  - λ¨λ“  μ μ¬λ³€μ μμΈ΅ (Halton draws κΈ°λ°)
  - κµ¬μ΅°λ¨λΈ λ΅κ·Έμ°λ„ κ³„μ‚°

### **4. λ™μ‹μ¶”μ • μ—”μ§„**
- **νμΌ**: `src/analysis/hybrid_choice_model/iclv_models/multi_latent_estimator.py`
- **ν΄λμ¤**: `MultiLatentSimultaneousEstimator`
- **κΈ°λ¥**:
  - 5κ° μ μ¬λ³€μ + μ„ νƒλ¨λΈ μ™„μ „ λ™μ‹μ¶”μ •
  - Halton draws μƒμ„± (μ™Έμƒ LV 4κ° + λ‚΄μƒ LV μ¤μ°¨ 1κ° = 5μ°¨μ›)
  - κ²°ν•© λ΅κ·Έμ°λ„ κ³„μ‚°
  - BFGS μµμ ν™”
  - κ²°κ³Ό μ¶λ ¥ λ° μ €μ¥

### **5. ν…μ¤νΈ μ¤ν¬λ¦½νΈ**
- **νμΌ**: `scripts/test_multi_latent_iclv.py`
- **κΈ°λ¥**:
  - λ°μ΄ν„° λ΅λ“ λ° κ²€μ¦
  - λ¨λΈ μ„¤μ • μƒμ„±
  - μ¶”μ • μ‹¤ν–‰
  - κ²°κ³Ό μ €μ¥ (CSV)

---

## π”§ κΈ°μ΅΄ μ½”λ“ μ¬μ‚¬μ©

### **μ¬μ‚¬μ©λ ν΄λμ¤**

1. **`OrderedProbitMeasurement`** (μΈ΅μ •λ¨λΈ)
   - 5κ° μ μ¬λ³€μ κ°κ°μ— λ€ν•΄ μΈμ¤ν„΄μ¤ μƒμ„±
   - λ΅κ·Έμ°λ„ κ³„μ‚° λ΅μ§ κ·Έλ€λ΅ μ‚¬μ©

2. **`BinaryProbitChoice`** (μ„ νƒλ¨λΈ)
   - λ‚΄μƒ LV (κµ¬λ§¤μλ„)λ§ μ‚¬μ©
   - κΈ°μ΅΄ λ΅μ§ κ·Έλ€λ΅ μ‚¬μ©

3. **`HaltonDrawGenerator`** (Halton μ‹ν€€μ¤)
   - μ°¨μ›λ§ 5μ°¨μ›μΌλ΅ ν™•μ¥
   - μƒμ„± λ΅μ§ κ·Έλ€λ΅ μ‚¬μ©

### **ν™•μ¥λ λ¶€λ¶„**

1. **κµ¬μ΅°λ¨λΈ**: λ‹¨μΌ LV β†’ λ‹¤μ¤‘ LV (4κ° μ™Έμƒ + 1κ° λ‚΄μƒ)
2. **λ™μ‹μ¶”μ • μ—”μ§„**: 1κ° LV β†’ 5κ° LV λ΅κ·Έμ°λ„ κ³„μ‚°

---

## π“ νλΌλ―Έν„° κµ¬μ΅°

### **μ΄ νλΌλ―Έν„° μ: 203κ°**

| λ¨λΈ | νλΌλ―Έν„° | κ°μ |
|------|---------|------|
| **μΈ΅μ •λ¨λΈ** | | |
| - κ±΄κ°•κ΄€μ‹¬λ„ | Ξ¶ (6) + Ο„ (24) | 30 |
| - κ±΄κ°•μ μµμ„± | Ξ¶ (6) + Ο„ (24) | 30 |
| - κ°€κ²©μμ¤€ | Ξ¶ (3) + Ο„ (12) | 15 |
| - μμ–‘μ§€μ‹ | Ξ¶ (20) + Ο„ (80) | 100 |
| - κµ¬λ§¤μλ„ | Ξ¶ (3) + Ο„ (12) | 15 |
| **κµ¬μ΅°λ¨λΈ** | Ξ³_lv (4) + Ξ³_x (4) | 8 |
| **μ„ νƒλ¨λΈ** | Ξ² (4) + Ξ» (1) | 5 |
| **μ΄κ³„** | | **203κ°** |

---

## π€ μ‚¬μ© λ°©λ²•

### **1. κΈ°λ³Έ μ‚¬μ©**

```python
from src.analysis.hybrid_choice_model.iclv_models import (
    create_default_multi_lv_config,
    MultiLatentSimultaneousEstimator
)
import pandas as pd

# λ°μ΄ν„° λ΅λ“
data = pd.read_csv('data/processed/iclv/integrated_data.csv')

# μ„¤μ • μƒμ„±
config = create_default_multi_lv_config(
    n_draws=100,
    max_iterations=1000
)

# μ¶”μ •
estimator = MultiLatentSimultaneousEstimator(config, data)
results = estimator.estimate()

# κ²°κ³Ό μ¶λ ¥
estimator.print_results()
```

### **2. μ¤ν¬λ¦½νΈ μ‹¤ν–‰**

```bash
python scripts/test_multi_latent_iclv.py
```

### **3. κ²°κ³Ό ν™•μΈ**

κ²°κ³Όλ” `results/multi_lv_iclv/` λ””λ ‰ν† λ¦¬μ— μ €μ¥λ©λ‹λ‹¤:
- `measurement_params_YYYYMMDD_HHMMSS.csv`: μΈ΅μ •λ¨λΈ νλΌλ―Έν„°
- `structural_params_YYYYMMDD_HHMMSS.csv`: κµ¬μ΅°λ¨λΈ νλΌλ―Έν„°
- `choice_params_YYYYMMDD_HHMMSS.csv`: μ„ νƒλ¨λΈ νλΌλ―Έν„°
- `model_fit_YYYYMMDD_HHMMSS.csv`: λ¨λΈ μ ν•©λ„

---

## π― ν•µμ‹¬ νΉμ§•

### **1. μ™„μ „ λ™μ‹μ¶”μ •**

- 5κ° μ μ¬λ³€μμ μΈ΅μ •λ¨λΈ νλΌλ―Έν„° (Ξ¶, Ο„)
- κµ¬μ΅°λ¨λΈ νλΌλ―Έν„° (Ξ³)
- μ„ νƒλ¨λΈ νλΌλ―Έν„° (Ξ², Ξ»)

**λ¨λ‘ ν•λ²μ— μ¶”μ •**

### **2. κΈ°μ΅΄ μ½”λ“ μ¬μ‚¬μ©**

- `OrderedProbitMeasurement`: μΈ΅μ •λ¨λΈ λ΅μ§ μ¬μ‚¬μ©
- `BinaryProbitChoice`: μ„ νƒλ¨λΈ λ΅μ§ μ¬μ‚¬μ©
- `HaltonDrawGenerator`: Halton μ‹ν€€μ¤ μƒμ„± μ¬μ‚¬μ©

**μ¤‘λ³µ μ½”λ“ μ—†μ**

### **3. ν™•μ¥ κ°€λ¥ν• κµ¬μ΅°**

- μ μ¬λ³€μ κ°μ λ³€κ²½ κ°€λ¥
- μΈ΅μ • μ§€ν‘ κ°μ λ³€κ²½ κ°€λ¥
- κµ¬μ΅°λ¨λΈ κ΄€κ³„ λ³€κ²½ κ°€λ¥

---

## β οΈ μ£Όμμ‚¬ν•­

### **1. κ³„μ‚° μ‹κ°„**

- νλΌλ―Έν„° μ: 203κ°
- Halton draws: 100κ° (κΈ°λ³Έκ°’)
- μμƒ μ†μ” μ‹κ°„: **1-2μ‹κ°„** (λ°μ΄ν„° ν¬κΈ°μ— λ”°λΌ λ‹¤λ¦„)

### **2. μλ ΄ λ¬Έμ **

- μ΄κΈ°κ°’μ΄ μ¤‘μ”ν•¨
- μλ ΄ν•μ§€ μ•μΌλ©΄ `n_draws` μ¤„μ΄κΈ° (50κ°)
- λλ” `max_iterations` λλ¦¬κΈ° (2000)

### **3. λ©”λ¨λ¦¬**

- 5,904κ° κ΄€μΈ΅μΉ Γ— 100 draws = 590,400κ° μ‹λ®¬λ μ΄μ…
- μ¶©λ¶„ν• λ©”λ¨λ¦¬ ν•„μ” (μµμ† 8GB κ¶μ¥)

---

## π“‹ λ‹¤μ λ‹¨κ³„

### **1. λ¨λΈ μ¶”μ • μ‹¤ν–‰**

```bash
python scripts/test_multi_latent_iclv.py
```

### **2. κ²°κ³Ό κ²€μ¦**

- νλΌλ―Έν„° λ¶€νΈ ν™•μΈ
- ν†µκ³„μ  μ μμ„± ν™•μΈ
- λ¨λΈ μ ν•©λ„ ν™•μΈ (LL, AIC, BIC)

### **3. ν•΄μ„**

- κµ¬μ΅°λ¨λΈ κ³„μ (Ξ³): μ μ¬λ³€μ κ°„ κ΄€κ³„
- μ„ νƒλ¨λΈ κ³„μ (Ξ²): μ†μ„± ν¨κ³Ό
- Lambda (Ξ»): κµ¬λ§¤μλ„ β†’ μ„ νƒ ν¨κ³Ό

---

## π‰ μ™„λ£!

5κ° μ μ¬λ³€μ μ™„μ „ λ™μ‹μ¶”μ • ICLV λ¨λΈμ΄ μ„±κ³µμ μΌλ΅ κµ¬ν„λμ—μµλ‹λ‹¤!

**κµ¬ν„ μ‹κ°„**: μ•½ 4μ‹κ°„  
**μ½”λ“ λΌμΈ**: μ•½ 1,000μ¤„  
**μ¬μ‚¬μ© λΉ„μ¨**: μ•½ 70% (κΈ°μ΅΄ μ½”λ“ ν™μ©)

---

## π“ λ¬Έμ

λ¬Έμ κ°€ λ°μƒν•λ©΄ λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

1. λ°μ΄ν„° κ²€μ¦: `verify_data()` ν•¨μ μ‹¤ν–‰
2. λ΅κ·Έ νμΌ: `logs/multi_lv_iclv_*.log`
3. μ—λ¬ λ©”μ‹μ§€: ν„°λ―Έλ„ μ¶λ ¥

Happy modeling! π€

